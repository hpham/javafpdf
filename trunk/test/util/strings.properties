# SQL - LOGIN
sql.login.validate=SELECT id, vorname, nachname, spitzname FROM user WHERE \
username = ? AND password = ? AND rolename = 'tomcat' LIMIT 1
sql.login.permissions=SELECT p.name AS permission, p.description FROM \
user_permissions AS up, permissions AS p WHERE up.user = ? AND p.id = \
up.permission ORDER BY up.permission

# SQL - BUCHUNGEN
sql.buchungen.load=SELECT zustand, eingang_anfrage, angebot_gesendet, \
buchung_bestaetigt, rechnung_gesendet, rechnung_bezahlt, buchung_storniert, \
firma, name, anschrift, telefon, mobil, fax, email, von, bis, treffpunkt, \
treffpunkt2, endpunkt, personenzahl, gruppenart, sprache, programm, programm2, \
extras, bemerkungen, gruppenpreis, zahlungsart, rechnung_firma, rechnung_name, \
rechnung_anschrift, angebot, angebot_bis, kunde_meldet_sich, \
kunde_meldet_sich_bis, buchung_bestaetigen FROM buchungen WHERE id = ?
sql.buchungen.create=INSERT INTO buchungen (zustand, eingang_anfrage, firma, \
name, anschrift, telefon, mobil, fax, email, von, bis, treffpunkt, \
treffpunkt2, endpunkt, personenzahl, gruppenart, sprache, programm, programm2, \
extras, bemerkungen, gruppenpreis, zahlungsart, rechnung_firma, rechnung_name, \
rechnung_anschrift, angebot, angebot_bis, kunde_meldet_sich, \
kunde_meldet_sich_bis, buchung_bestaetigen) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, \
?, ?, ?, ?, ?, ?, ?, ?, ?, ? ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
sql.buchungen.update=UPDATE buchungen SET zustand = ?, firma = ?, name = ?, \
anschrift = ?, telefon = ?, mobil = ?, fax = ?, email = ?, von = ?, bis = ?, \
treffpunkt = ?, treffpunkt2 = ?, endpunkt = ?, personenzahl = ?, \
gruppenart = ?, sprache = ?, programm = ?, programm2 = ?, extras = ?, \
bemerkungen = ?, gruppenpreis = ?, zahlungsart = ?, rechnung_firma = ?, \
rechnung_name = ?, rechnung_anschrift = ?, angebot = ?, angebot_bis = ?, \
kunde_meldet_sich = ?, kunde_meldet_sich_bis = ?, buchung_bestaetigen = ? \
WHERE id = ? LIMIT 1
sql.buchungen.delete=DELETE FROM buchungen WHERE id = ?
sql.buchungen.list=SELECT id FROM buchungen ORDER BY eingang_anfrage DESC
sql.buchungen.users.load=SELECT user, bestaetigt FROM buchungen_user WHERE \
buchung = ?
sql.buchungen.users.add=INSERT INTO buchungen_user (buchung, user) VALUES (?, ?)
sql.buchungen.users.delete=DELETE FROM buchungen_user WHERE buchung = ? AND \
user = ?
sql.buchungen.users.list=SELECT u.id, u.username, u.vorname, u.nachname FROM \
user AS u, buchungen_user AS bu WHERE bu.buchung = ? AND u.id = bu.user \
ORDER BY u.vorname, u.nachname, u.username ASC
sql.buchungen.users.permissions.list=SELECT u.id, u.username, u.vorname, \
u.nachname, u.spitzname, p.id FROM user AS u, user_permissions AS up, \
permissions AS p WHERE p.name = ? AND up.permission = p.id AND u.id = up.user \
ORDER BY u.vorname, u.nachname, u.username ASC
sql.buchungen.users.buchung.list=SELECT user FROM buchungen_user WHERE \
user = ? AND buchung = ? LIMIT 1
sql.buchungen.users.zeiten.list=SELECT user FROM user_zeiten WHERE user = ? \
AND ((von >= ? AND von <= ?) OR (bis >= ? AND bis <= ?)) LIMIT 1
sql.buchungen.users.termine.list=SELECT tu.user FROM themen_termine AS t, \
themen_termine_user AS tu WHERE tu.user = ? AND t.id = tu.termin AND \
((t.von >= ? AND t.von <= ?) OR (t.bis >= ? AND t.bis <= ?)) LIMIT 1
sql.buchungen.users.buchungen.list=SELECT bu.user FROM buchungen AS b, \
buchungen_user AS bu WHERE bu.user = ? AND b.id = bu.buchung AND \
((b.von >= ? AND b.von <= ?) OR (b.bis >= ? AND b.bis <= ?)) LIMIT 1
sql.buchungen.users.themen.list=SELECT ut.user FROM user_themen AS ut WHERE \
ut.user = ? AND ut.thema = ? LIMIT 1
sql.buchungen.users.drop=DELETE FROM buchungen_user WHERE buchung = ?
sql.buchungen.rechnung.load=SELECT jahr, monat, nummer FROM rechnungen WHERE \
buchung = ? LIMIT 1

# SQL - SPRACHEN
sql.sprachen.create=INSERT INTO sprachen (name) VALUES (?)
sql.sprachen.update=UPDATE sprachen SET name = ? WHERE id = ?
sql.sprachen.list=SELECT id, name FROM sprachen ORDER BY name ASC
sql.sprachen.delete=DELETE FROM sprachen WHERE id = ?
sql.sprachen.users.drop=DELETE FROM sprachen_user WHERE sprache = ?
sql.sprachen.buchungen.drop=UPDATE buchungen SET sprache = NULL WHERE sprache = ?

# SQL - USERS
sql.users.load=SELECT username, password, vorname, nachname, spitzname, titel, \
telefon_privat, telefon_dienst, mobil_privat, mobil_dienst, fax, email, \
comment, domlizenz FROM user WHERE id = ? LIMIT 1
sql.users.create=INSERT INTO user (username, password, vorname, nachname, \
spitzname, titel, telefon_privat, telefon_dienst, mobil_privat, mobil_dienst, \
fax, email, comment, domlizenz) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, \
?, ?)
sql.users.update=UPDATE user SET username = ?, password = ?, vorname = ?, \
nachname = ?, spitzname = ?, titel = ?, telefon_privat = ?, \
telefon_dienst = ?, mobil_privat = ?, mobil_dienst = ?, fax = ?, email = ?, \
comment = ?, domlizenz = ? WHERE id = ? LIMIT 1
sql.users.delete=DELETE FROM user WHERE id = ?
sql.users.list=SELECT id, vorname, nachname, spitzname, username FROM user \
ORDER BY vorname, nachname, username ASC
sql.users.permissions.load=SELECT up.permission, p.name FROM \
user_permissions AS up, permissions AS p WHERE up.user = ? AND p.id = \
up.permission
sql.users.permissions.add=INSERT INTO user_permissions (user, permission) \
VALUES (?, ?)
sql.users.permissions.delete=DELETE FROM user_permissions WHERE user = ? AND \
permission = ?
sql.users.permissions.list=SELECT id, name FROM permissions ORDER BY name
sql.users.sprachen.load=SELECT us.sprache, s.name FROM user_sprachen AS us, \
sprachen AS s WHERE us.user = ? AND s.id = us.sprache ORDER BY id
sql.users.sprachen.add=INSERT INTO user_sprachen (user, sprache) VALUES (?, ?)
sql.users.sprachen.delete=DELETE FROM user_sprachen WHERE user = ? AND sprache \
= ?
sql.users.sprachen.list=SELECT id, name FROM sprachen ORDER BY name
sql.users.themen.load=SELECT ut.thema, t.title FROM user_themen AS ut, themen \
AS t WHERE ut.user = ? AND t.id = ut.thema
sql.users.themen.add=INSERT INTO user_themen (user, thema) VALUES (?, ?)
sql.users.themen.delete=DELETE FROM user_themen WHERE user = ? AND thema = ?
sql.users.themen.list=SELECT id, title FROM themen ORDER BY title
